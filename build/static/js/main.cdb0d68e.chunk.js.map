{"version":3,"sources":["components/Auth/useFormValidation.js","components/Auth/validateCreateLink.js","firebase/context.js","components/Link/CreateLink.js","components/Auth/validateLogin.js","firebase/config.js","firebase/index.js","firebase/firebase.js","components/Auth/Login.js","components/Auth/ForgotPassword.js","utils/index.js","components/Link/LinkItem.js","components/Link/SearchLinks.js","components/Link/LinkList.js","components/Link/LinkDetail.js","components/Header.js","components/Auth/useAuth.js","components/App.js","serviceWorker.js","index.js"],"names":["useFormValidation","initialState","validate","authenticate","_React$useState","React","useState","_React$useState2","Object","slicedToArray","values","setValues","_React$useState3","_React$useState4","errors","setErrors","_React$useState5","_React$useState6","isSubmitting","setSubmitting","useEffect","keys","length","handleSubmit","event","preventDefault","validationErrors","handleBlur","handleChange","persist","previousValues","objectSpread","defineProperty","target","name","value","validateCreateLink","description","url","test","FireabaseContext","createContext","INITIAL_STATE","CreateLink","props","_React$useContext","useContext","FirebaseContext","firebase","user","_useFormValidation","newLink","postedBy","id","uid","displayName","voteCount","votes","comments","created","Date","now","db","collection","add","history","push","react_default","a","createElement","onSubmit","className","onChange","placeholder","autoComplete","type","validateLogin","email","password","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","Firebase","classCallCheck","this","app","initializeApp","auth","firestore","createUserWithEmailAndPassword","newUser","updateProfile","signInWithEmailAndPassword","signOut","sendPasswordResetEmail","Login","_authenticateduser","apply","arguments","login","setLogin","firebaseError","setFirebaseError","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","register","t0","console","error","message","stop","onBlur","disabled","style","background","onClick","prevLogin","react_router_dom","to","ForgotPassword","resetPasswordEmail","setResetPasswordEmail","isPasswordReset","setIsPasswordReset","passwordResetError","setPasswordResetError","_handleResetPassword","LINKS_PER_PAGE","withRouter","_ref","link","index","showCount","postedByAuthUser","voteRef","doc","get","then","exists","previousVotes","data","vote","votedBy","updatedVotes","concat","toConsumableArray","update","href","replace","distanceInWordsToNow","Fragment","delete","log","catch","err","SearchLinks","filteredLinks","setFilteredLinks","links","setLinks","filter","setFilter","snapshot","docs","map","query","toLowerCase","matchedLinks","includes","filteredLink","Link_LinkItem","key","LinkList","cursor","setCursor","isNewPage","location","pathname","isTopPage","loading","setLoading","page","Number","match","params","linksRef","handleSnapshot","lastLink","unsubscribe","hasCursor","Boolean","orderBy","limit","onSnapshot","startAfter","offset","axios","response","getLinks","pageIndex","opacity","LinkDetail","setLink","commentText","setCommentText","linkId","linkRef","rows","cols","previousComments","comment","text","updatedComments","prevState","Header","src","alt","logout","useAuth","authUser","setAuthUser","onAuthStateChanged","App","context","Provider","components_Header","react_router","exact","from","component","path","window","hostname","ReactDOM","render","components_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.cdb0d68e.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nfunction useFormValidation(initialState, validate, authenticate) {\r\n  const [values, setValues] = React.useState(initialState)\r\n  const [errors, setErrors] = React.useState({})\r\n  const [isSubmitting, setSubmitting] = React.useState(false)\r\n\r\n  React.useEffect(() => {\r\n    if (isSubmitting) {\r\n      const noErrors = Object.keys(errors).length === 0\r\n      if (noErrors) {\r\n        authenticate()\r\n        setSubmitting(false)\r\n      } else {\r\n        setSubmitting(false)\r\n      }\r\n    }\r\n  }, [errors])\r\n\r\n  function handleChange(event) {\r\n    event.persist();\r\n    setValues(previousValues => ({\r\n      ...values,\r\n      [event.target.name]: event.target.value\r\n    }))\r\n  }\r\n\r\n  function handleBlur() {\r\n    const validationErrors = validate(values)\r\n    setErrors(validationErrors)\r\n  }\r\n\r\n  function handleSubmit(event) {\r\n    event.preventDefault()\r\n    const validationErrors = validate(values)\r\n    setErrors(validationErrors)\r\n    setSubmitting(true)\r\n\r\n  }\r\n\r\n  return { handleSubmit, handleBlur, errors, isSubmitting, handleChange, values }\r\n}\r\n\r\nexport default useFormValidation;\r\n","export default function validateCreateLink(values) {\r\n  let errors = {}\r\n  //Description errors\r\n  if (!values.description) {\r\n    errors.description = \"Description required\"\r\n  } else if (values.description.length < 10) {\r\n    errors.description = \"Description must be at least 10 characters\"\r\n  }\r\n  //URL errors\r\n  if (!values.url) {\r\n    errors.url = \"URL required\"\r\n  } else if (!/^(ftp|http|https):\\/\\/[^ \"]+$/.test(values.url)) {\r\n    errors.url = \"URL must be valid\"\r\n  }\r\n  return errors\r\n}\r\n","import React from 'react'\r\n\r\nconst FireabaseContext = React.createContext(null)\r\n\r\nexport default FireabaseContext;","import React from \"react\";\nimport useFormValidation from \"../Auth/useFormValidation\";\nimport validateCreateLink from \"../Auth/validateCreateLink\";\nimport FirebaseContext from \"../../firebase/context\";\n\nconst INITIAL_STATE = {\n  description: \"\",\n  url: \"\"\n};\n\nfunction CreateLink(props) {\n  const { firebase, user } = React.useContext(FirebaseContext);\n  const { handleSubmit, handleChange, values, errors } = useFormValidation(\n    INITIAL_STATE,\n    validateCreateLink,\n    handleCreateLink\n  );\n\n  function handleCreateLink() {\n    if (!user) {\n      props.history.push(\"/login\");\n    } else {\n      const { url, description } = values;\n      const newLink = {\n        url,\n        description,\n        postedBy: {\n          id: user.uid,\n          name: user.displayName\n        },\n        voteCount: 0,\n        votes: [],\n        comments: [],\n        created: Date.now()\n      };\n      firebase.db.collection(\"links\").add(newLink);\n      props.history.push(\"/\");\n    }\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className=\"flex flex-column mt3\">\n      <input\n        onChange={handleChange}\n        value={values.description}\n        name=\"description\"\n        placeholder=\"A description for your link\"\n        autoComplete=\"off\"\n        type=\"text\"\n        className={errors.description && \"error-input\"}\n      />\n      {errors.description && <p className=\"error-text\">{errors.description}</p>}\n      <input\n        onChange={handleChange}\n        value={values.url}\n        name=\"url\"\n        placeholder=\"The URL for the link\"\n        autoComplete=\"off\"\n        type=\"url\"\n        className={errors.url && \"error-input\"}\n      />\n      {errors.url && <p className=\"error-text\">{errors.url}</p>}\n      <button className=\"button\" type=\"submit\">\n        Submit\n      </button>\n    </form>\n  );\n}\n\nexport default CreateLink;\n","export default function validateLogin(values) {\r\n  let errors = {}\r\n  //Email errors\r\n  if (!values.email) {\r\n    errors.email = \"Email required\"\r\n  } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(values.email)) {\r\n    errors.email = \"Invalid email address\"\r\n  }\r\n  //Password errors\r\n  if (!values.password) {\r\n    errors.password = \"Password required\"\r\n  } else if (values.password.length < 6) {\r\n    errors.password = \"Password must be at least 6 characters\"\r\n  }\r\n  return errors\r\n}\r\n","const firebaseConfig = {\r\n  apiKey: \"AIzaSyDWEaZQUvWhhbCsBuMnUVStmpLWe4-dGnE\",\r\n  authDomain: \"anonymous-news-40b02.firebaseapp.com\",\r\n  databaseURL: \"https://anonymous-news-40b02.firebaseio.com\",\r\n  projectId: \"anonymous-news-40b02\",\r\n  storageBucket: \"anonymous-news-40b02.appspot.com\",\r\n  messagingSenderId: \"80230057242\",\r\n  appId: \"1:80230057242:web:da953abc0feb37281458a3\",\r\n  measurementId: \"G-Q1NC0YFSNG\"\r\n};\r\nexport default firebaseConfig\r\n// Initialize Firebase\r\n","import firebase from './firebase'\r\nimport FireabaseContext from './context';\r\nexport { FireabaseContext as FirebaseContext }\r\nexport default firebase;","import firebaseConfig from './config'\r\nimport app from 'firebase/app'\r\nimport 'firebase/firebase-auth'\r\nimport 'firebase/firestore'\r\n\r\n\r\n\r\nclass Firebase {\r\n  constructor() {\r\n    app.initializeApp(firebaseConfig);\r\n    //app.analytics();\r\n    this.auth = app.auth()\r\n    this.db = app.firestore();\r\n  }\r\n\r\n  async register(name, email, password) {\r\n    const newUser = await this.auth.createUserWithEmailAndPassword(\r\n      email,\r\n      password\r\n    )\r\n    return await newUser.user.updateProfile({\r\n      displayName: name\r\n    })\r\n  }\r\n\r\n  async login(email, password) {\r\n    return await this.auth.signInWithEmailAndPassword(email, password)\r\n  }\r\n\r\n  async logout() {\r\n    await this.auth.signOut()\r\n  }\r\n\r\n  async resetPasswordEmail(email) {\r\n    await this.auth.sendPasswordResetEmail(email)\r\n  }\r\n}\r\n\r\nconst firebase = new Firebase()\r\nexport default firebase;","import React from \"react\";\r\nimport useFormValidation from \"./useFormValidation\";\r\nimport validateLogin from \"./validateLogin\";\r\nimport firebase from '../../firebase'\r\nimport { Link } from 'react-router-dom'\r\n\r\n\r\n\r\nconst INITIAL_STATE = {\r\n  name: \"\",\r\n  email: \"\",\r\n  password: \"\"\r\n}\r\n\r\nfunction Login(props) {\r\n  const { handleSubmit, handleBlur, errors, isSubmitting, handleChange, values } = useFormValidation(\r\n    INITIAL_STATE,\r\n    validateLogin,\r\n    authenticateduser\r\n  )\r\n  const [login, setLogin] = React.useState(true)\r\n  const [firebaseError, setFirebaseError] = React.useState(null)\r\n\r\n  async function authenticateduser() {\r\n    const { name, email, password } = values\r\n    try {\r\n      login\r\n        ? await firebase.login(email, password)\r\n        : await firebase.register(name, email, password)\r\n      props.history.push('/new/1')\r\n    } catch (err) {\r\n      console.error('Authentication Error', err)\r\n      setFirebaseError(err.message)\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <div>\r\n      <h2 className=\"mv3\">{login ? 'Login' : 'Create Account'}</h2>\r\n      <form onSubmit={handleSubmit} className=\"flex flex-column\">\r\n        {!login &&\r\n          <input\r\n            onChange={handleChange}\r\n            onBlur={handleBlur}\r\n            name=\"name\"\r\n            type=\"text\"\r\n            value={values.name}\r\n            placeholder=\"Your name\"\r\n            autoComplete=\"off\"\r\n          />\r\n        }\r\n        <input\r\n          onChange={handleChange}\r\n          type=\"email\"\r\n          value={values.email}\r\n          onBlur={handleBlur}\r\n          className={errors.email && 'error-input'}\r\n          name=\"email\"\r\n          placeholder=\"Your email\"\r\n          autoComplete=\"off\"\r\n        />\r\n        {errors.email && <p className=\"error-text\">{errors.email}</p>}\r\n        <input\r\n          onChange={handleChange}\r\n          value={values.password}\r\n          onBlur={handleBlur}\r\n          className={errors.password && 'error-input'}\r\n          type=\"password\"\r\n          name=\"password\"\r\n          placeholder=\"Choose a secure password\"\r\n        />\r\n        {errors.password && <p className=\"error-text\">{errors.password}</p>}\r\n        {firebaseError && <p className=\"error-text\">{firebaseError}</p>}\r\n        <div className=\"flex mt3\">\r\n          <button\r\n            type=\"submit\"\r\n            className=\"button pointer mr2\"\r\n            disabled={isSubmitting}\r\n            style={{ background: isSubmitting ? 'grey' : 'orange' }}\r\n          >\r\n            Submit\r\n          </button>\r\n          <button type=\"button\" className=\"pointer button\" onClick={() => setLogin(prevLogin => !prevLogin)}>\r\n            {login ? 'need to create an account?' : 'already have an account?'}\r\n          </button>\r\n        </div>\r\n      </form>\r\n      <div className=\"forgot-password\">\r\n        <Link to=\"/forgot\">\r\n          Forgot password?\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import React from \"react\";\r\nimport { FirebaseContext } from \"../../firebase\";\r\n\r\nfunction ForgotPassword() {\r\n  const { firebase } = React.useContext(FirebaseContext)\r\n  const [resetPasswordEmail, setResetPasswordEmail] = React.useState('')\r\n  const [isPasswordReset, setIsPasswordReset] = React.useState(false)\r\n  const [passwordResetError, setPasswordResetError] = React.useState(null)\r\n\r\n  async function handleResetPassword() {\r\n    try {\r\n      await firebase.resetPasswordEmail(resetPasswordEmail)\r\n      setIsPasswordReset(true)\r\n      setPasswordResetError(null);\r\n    } catch (err) {\r\n      console.error(\"Error send email\", err)\r\n      setPasswordResetError(err.message)\r\n      setIsPasswordReset(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <input\r\n        type=\"email\"\r\n        className=\"input\"\r\n        placeholder=\"Provide your account email\"\r\n        onChange={event => setResetPasswordEmail(event.target.value)}\r\n      />\r\n      <div>\r\n        <button className=\"button\" onClick={handleResetPassword}>\r\n          Reset Password\r\n        </button>\r\n      </div>\r\n      {isPasswordReset && <p> Check email to reset password</p>}\r\n      {passwordResetError && <p className=\"error-text\">{passwordResetError}</p>}\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default ForgotPassword;\r\n","export const LINKS_PER_PAGE = 5;\r\n\r\nexport function getDomain(url) {\r\n  return url.replace(/^https?:\\/\\//i, \"\");\r\n}\r\n\r\n/* EMAIL REGEX: !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(values.email) */\r\n/* URL REGEX: !/^(ftp|http|https):\\/\\/[^ \"]+$/.test(values.url) */\r\n","import React from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport { getDomain } from \"../../utils\";\nimport distanceInWordsToNow from \"date-fns/distance_in_words_to_now\";\nimport FirebaseContext from \"../../firebase/context\";\n\nfunction LinkItem({ link, index, showCount, history }) {\n  const { firebase, user } = React.useContext(FirebaseContext);\n\n  function handleVote() {\n    if (!user) {\n      history.push(\"/login\");\n    } else {\n      const voteRef = firebase.db.collection(\"links\").doc(link.id);\n      voteRef.get().then(doc => {\n        if (doc.exists) {\n          const previousVotes = doc.data().votes;\n          const vote = { votedBy: { id: user.uid, name: user.displayName } };\n          const updatedVotes = [...previousVotes, vote];\n          const voteCount = updatedVotes.length;\n          voteRef.update({ votes: updatedVotes, voteCount });\n        }\n      });\n    }\n  }\n\n  function handleDeleteLink() {\n    const linkRef = firebase.db.collection(\"links\").doc(link.id);\n    linkRef\n      .delete()\n      .then(() => {\n        console.log(`Document with ID ${link.id} deleted`);\n      })\n      .catch(err => {\n        console.error(\"Error deleting document:\", err);\n      });\n  }\n\n  const postedByAuthUser = user && user.uid === link.postedBy.id;\n\n  return (\n    <div className=\"flex items-start mt2\">\n      <div className=\"flex items-center\">\n        {showCount && <span className=\"gray\">{index}.</span>}\n        <div className=\"vote-button\" onClick={handleVote}>\n          ▲\n        </div>\n      </div>\n      <div className=\"ml1\">\n        <div>\n          <a href={link.url} className=\"black no-underline\">\n            {link.description}\n          </a>{\" \"}\n          <span className=\"link\">({getDomain(link.url)})</span>\n        </div>\n        <div className=\"f6 lh-copy gray\">\n          {link.voteCount} votes by {link.postedBy.name}{\" \"}\n          {distanceInWordsToNow(link.created)}\n          {\" | \"}\n          <Link to={`/link/${link.id}`}>\n            {link.comments.length > 0\n              ? `${link.comments.length} comments`\n              : \"discuss\"}\n          </Link>\n          {postedByAuthUser && (\n            <>\n              {\" | \"}\n              <span className=\"delete-button\" onClick={handleDeleteLink}>\n                delete\n              </span>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default withRouter(LinkItem);\n","import React from \"react\";\nimport LinkItem from \"./LinkItem\";\nimport FirebaseContext from \"../../firebase/context\";\n\nfunction SearchLinks() {\n  const { firebase } = React.useContext(FirebaseContext);\n  const [filteredLinks, setFilteredLinks] = React.useState([]);\n  const [links, setLinks] = React.useState([]);\n  const [filter, setFilter] = React.useState(\"\");\n\n  React.useEffect(() => {\n    getInitialLinks();\n  }, []);\n\n  function getInitialLinks() {\n    firebase.db\n      .collection(\"links\")\n      .get()\n      .then(snapshot => {\n        const links = snapshot.docs.map(doc => {\n          return { id: doc.id, ...doc.data() };\n        });\n        setLinks(links);\n      });\n  }\n\n  function handleSearch(event) {\n    event.preventDefault();\n    const query = filter.toLowerCase();\n    const matchedLinks = links.filter(link => {\n      return (\n        link.description.toLowerCase().includes(query) ||\n        link.url.toLowerCase().includes(query) ||\n        link.postedBy.name.toLowerCase().includes(query)\n      );\n    });\n    setFilteredLinks(matchedLinks);\n  }\n\n  return (\n    <div>\n      <form onSubmit={handleSearch}>\n        <div>\n          Search <input onChange={event => setFilter(event.target.value)} />\n          <button>OK</button>\n        </div>\n      </form>\n      {filteredLinks.map((filteredLink, index) => (\n        <LinkItem\n          key={filteredLink.id}\n          showCount={false}\n          link={filteredLink}\n          index={index}\n        />\n      ))}\n    </div>\n  );\n}\n\nexport default SearchLinks;\n","import React from \"react\";\nimport FirebaseContext from \"../../firebase/context\";\nimport LinkItem from \"./LinkItem\";\nimport { LINKS_PER_PAGE } from \"../../utils/index\";\nimport axios from \"axios\";\n\nfunction LinkList(props) {\n  const { firebase } = React.useContext(FirebaseContext);\n  const [links, setLinks] = React.useState([]);\n  const [cursor, setCursor] = React.useState(null);\n  const isNewPage = props.location.pathname.includes(\"new\");\n  const isTopPage = props.location.pathname.includes(\"top\");\n  const [loading, setLoading] = React.useState(false)\n  const page = Number(props.match.params.page);\n  const linksRef = firebase.db\n    .collection(\"links\")\n\n  React.useEffect(() => {\n    const unsubscribe = getLinks();\n    return () => unsubscribe();\n  }, [isTopPage, page]);\n\n  function getLinks() {\n    const hasCursor = Boolean(cursor);\n    setLoading(true)\n    if (isTopPage) {\n      return linksRef\n        .orderBy(\"voteCount\", \"desc\")\n        .limit(LINKS_PER_PAGE)\n        .onSnapshot(handleSnapshot);\n    } else if (page === 1) {\n      return linksRef\n        .orderBy(\"created\", \"desc\")\n        .limit(LINKS_PER_PAGE)\n        .onSnapshot(handleSnapshot);\n    } else if (hasCursor) {\n      return linksRef\n        .orderBy(\"created\", \"desc\")\n        .startAfter(cursor.created)\n        .limit(LINKS_PER_PAGE)\n        .onSnapshot(handleSnapshot);\n    } else {\n      const offset = page * LINKS_PER_PAGE - LINKS_PER_PAGE;\n      axios\n        .get(\n          `https://us-central1-anonymous-news-40b02.cloudfunctions.net/linksPagination?offset=${offset}`\n        )\n        .then(response => {\n          const links = response.data;\n          const lastLink = links[links.length - 1];\n          setLinks(links);\n          setCursor(lastLink);\n          setLoading(false)\n        });\n\n      return () => { };\n    }\n  }\n\n  function handleSnapshot(snapshot) {\n    const links = snapshot.docs.map(doc => {\n      return { id: doc.id, ...doc.data() };\n    });\n    const lastLink = links[links.length - 1];\n    setLinks(links);\n    setCursor(lastLink);\n    setLoading(false)\n  }\n\n  function visitPreviousPage() {\n    if (page > 1) {\n      props.history.push(`/new/${page - 1}`);\n    }\n  }\n\n  function visitNextPage() {\n    if (page <= links.length / LINKS_PER_PAGE) {\n      props.history.push(`/new/${page + 1}`);\n    }\n  }\n\n  const pageIndex = page ? (page - 1) * LINKS_PER_PAGE + 1 : 0;\n\n  return (\n    <div style={{ opacity: loading ? 0.25 : 1 }}>\n      {links.map((link, index) => (\n        <LinkItem\n          key={link.id}\n          showCount={true}\n          link={link}\n          index={index + pageIndex}\n        />\n      ))}\n      {isNewPage && (\n        <div className=\"pagination\">\n          <div className=\"pointer mr2\" onClick={visitPreviousPage}>\n            Previous\n          </div>\n          <div className=\"pointer\" onClick={visitNextPage}>\n            Next\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default LinkList;\n\n\n// https://us-central1-anonymous-news-40b02.cloudfunctions.net/linksPagination","import React from \"react\";\nimport FirebaseContext from \"../../firebase/context\";\nimport LinkItem from \"./LinkItem\";\nimport distanceInWordsToNow from \"date-fns/distance_in_words_to_now\";\n\nfunction LinkDetail(props) {\n  const { firebase, user } = React.useContext(FirebaseContext);\n  const [link, setLink] = React.useState(null);\n  const [commentText, setCommentText] = React.useState(\"\");\n  const linkId = props.match.params.linkId;\n  const linkRef = firebase.db.collection(\"links\").doc(linkId);\n\n  React.useEffect(() => {\n    getLink();\n  }, []);\n\n  function getLink() {\n    linkRef.get().then(doc => {\n      setLink({ ...doc.data(), id: doc.id });\n    });\n  }\n\n  function handleAddComment() {\n    if (!user) {\n      props.history.push(\"/login\");\n    } else {\n      linkRef.get().then(doc => {\n        if (doc.exists) {\n          const previousComments = doc.data().comments;\n          const comment = {\n            postedBy: { id: user.uid, name: user.displayName },\n            created: Date.now(),\n            text: commentText\n          };\n          const updatedComments = [...previousComments, comment];\n          linkRef.update({ comments: updatedComments });\n          setLink(prevState => ({\n            ...prevState,\n            comments: updatedComments\n          }));\n          setCommentText(\"\");\n        }\n      });\n    }\n  }\n\n  return !link ? (\n    <div>Loading...</div>\n  ) : (\n    <div>\n      <LinkItem showCount={false} link={link} />\n      <textarea\n        onChange={event => setCommentText(event.target.value)}\n        value={commentText}\n        rows=\"6\"\n        cols=\"60\"\n      />\n      <div>\n        <button className=\"button\" onClick={handleAddComment}>\n          Add Comment\n        </button>\n      </div>\n      {link.comments.map((comment, index) => (\n        <div key={index}>\n          <p className=\"comment-author\">\n            {comment.postedBy.name} | {distanceInWordsToNow(comment.created)}\n          </p>\n          <p>{comment.text}</p>\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default LinkDetail;\n","import React from \"react\";\r\nimport { NavLink } from 'react-router-dom'\r\nimport { FirebaseContext } from \"../firebase\";\r\n\r\nfunction Header() {\r\n\r\n  const { user, firebase } = React.useContext(FirebaseContext)\r\n\r\n  return (\r\n    <div className=\"header\">\r\n      <div className=\"flex\">\r\n        <img src=\"/logo.png\" alt=\"Anonymous News Logo\" className=\"logo\" />\r\n        <NavLink to=\"/\" className=\"header-title\">\r\n          Anonymous News\r\n        </NavLink>\r\n        <NavLink to=\"/\" className=\"header-link\">\r\n          new\r\n        </NavLink>\r\n        <div className=\"divider\">|</div>\r\n        <NavLink to=\"/top\" className=\"header-link\">\r\n          top\r\n        </NavLink>\r\n        <div className=\"divider\">|</div>\r\n        <NavLink to=\"/search\" className=\"header-link\">\r\n          search\r\n        </NavLink>\r\n\r\n\r\n        {user && <>\r\n          <div className=\"divider\">|</div>\r\n          <NavLink to=\"/create\" className=\"header-link\">\r\n            submit\r\n        </NavLink>\r\n        </>}\r\n\r\n\r\n\r\n\r\n\r\n      </div>\r\n      <div className=\"flex\">\r\n        {user ? (\r\n          <>\r\n            <div className=\"header-name\">\r\n              {user.displayName}\r\n            </div>\r\n            <div className=\"divider\">\r\n              |\r\n            </div>\r\n            <div onClick={() => firebase.logout()} className=\"header-button\">\r\n              logout\r\n            </div>\r\n          </>\r\n        ) :\r\n          <NavLink to=\"/login\" className=\"header-link\">\r\n            login\r\n          </NavLink>\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\nexport default Header;\r\n","import React from \"react\";\r\nimport firebase from '../../firebase'\r\n\r\nfunction useAuth() {\r\n\r\n  const [authUser, setAuthUser] = React.useState(null)\r\n\r\n  React.useEffect(() => {\r\n    const unsubscribe = firebase.auth.onAuthStateChanged(user => {\r\n      if (user) {\r\n        setAuthUser(user)\r\n      } else {\r\n        setAuthUser(null)\r\n      }\r\n    })\r\n\r\n    return () => unsubscribe()\r\n  }, [])\r\n\r\n  return authUser\r\n}\r\n\r\nexport default useAuth;\r\n","import React from \"react\";\r\nimport { BrowserRouter, Switch, Route, Redirect } from 'react-router-dom';\r\nimport CreateLink from './Link/CreateLink'\r\nimport Login from './Auth/Login'\r\nimport ForgotPassword from './Auth/ForgotPassword'\r\nimport SearchLinks from './Link/SearchLinks'\r\nimport LinkList from './Link/LinkList'\r\nimport LinkDetail from './Link/LinkDetail'\r\nimport Header from './Header'\r\nimport useAuth from \"./Auth/useAuth\";\r\nimport firebase, { FirebaseContext } from '../firebase'\r\n\r\n\r\n\r\n\r\nfunction App() {\r\n  const user = useAuth()\r\n  return (\r\n    <BrowserRouter>\r\n      <FirebaseContext.Provider value={{ user, firebase }}>\r\n        <div className=\"app-container\">\r\n          <Header />\r\n          <div className=\"route-container\">\r\n            <Switch>\r\n              <Redirect exact from=\"/\" to=\"/new/1\" component={App} />\r\n              <Route path=\"/create\" component={CreateLink} />\r\n              <Route path=\"/login\" component={Login} />\r\n              <Route path=\"/forgot\" component={ForgotPassword} />\r\n              <Route path=\"/search\" component={SearchLinks} />\r\n              <Route path=\"/top\" component={LinkList} />\r\n              <Route path=\"/new/:page\" component={LinkList} />\r\n              <Route path=\"/link/:linkId\" component={LinkDetail} />\r\n            </Switch>\r\n          </div>\r\n        </div>\r\n      </FirebaseContext.Provider>\r\n    </BrowserRouter>\r\n\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./styles/index.css\";\r\nimport App from \"./components/App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}